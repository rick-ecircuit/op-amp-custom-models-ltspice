Version 4
SHEET 1 2028 888
WIRE 192 -192 192 -208
WIRE 192 -80 192 -112
WIRE 192 -48 192 -80
WIRE 672 -16 624 -16
WIRE 784 -16 736 -16
WIRE -384 48 -432 48
WIRE -336 48 -384 48
WIRE -240 48 -272 48
WIRE -112 48 -240 48
WIRE 16 48 -112 48
WIRE 192 48 192 16
WIRE 192 48 16 48
WIRE 272 48 192 48
WIRE 368 48 320 48
WIRE 432 48 368 48
WIRE 560 48 512 48
WIRE 624 48 624 -16
WIRE 624 48 560 48
WIRE 784 48 784 -16
WIRE 832 48 784 48
WIRE -384 96 -384 48
WIRE -272 96 -272 48
WIRE -112 96 -112 48
WIRE 16 96 16 48
WIRE 320 96 320 48
WIRE -336 112 -336 48
WIRE -320 112 -336 112
WIRE 272 112 272 48
WIRE 624 112 624 48
WIRE 672 112 624 112
WIRE 784 112 784 48
WIRE 784 112 736 112
WIRE -320 160 -336 160
WIRE -384 224 -384 176
WIRE -384 224 -432 224
WIRE -336 224 -336 160
WIRE -336 224 -384 224
WIRE -272 224 -272 176
WIRE -112 224 -112 176
WIRE -112 224 -272 224
WIRE 16 224 16 160
WIRE 16 224 -112 224
WIRE 272 224 272 160
WIRE 272 224 16 224
WIRE 320 224 320 176
WIRE 320 224 272 224
WIRE 1120 224 1120 192
WIRE 192 256 192 48
WIRE -112 288 -112 224
WIRE -48 288 -112 288
WIRE 192 352 192 320
WIRE 1120 352 1120 304
WIRE 1216 352 1120 352
WIRE 1248 352 1216 352
WIRE 1344 352 1296 352
WIRE 1360 352 1344 352
WIRE 192 384 192 352
WIRE 1120 384 1120 352
WIRE 1296 384 1296 352
WIRE 1248 400 1248 352
WIRE 1248 480 1248 448
WIRE 1296 480 1296 464
WIRE 1296 480 1248 480
WIRE 192 496 192 464
WIRE 1296 496 1296 480
WIRE 1120 512 1120 464
FLAG 1120 512 vee
FLAG 1120 192 vcc
FLAG 368 48 out1
FLAG 560 48 out2
FLAG -432 48 +
FLAG -432 224 -
FLAG -240 48 vg1
FLAG 1216 352 vmid
FLAG 1344 352 vmid1
FLAG 1296 496 0
FLAG -48 288 vmid1
FLAG 192 -208 vcc
FLAG 192 -80 vlp
FLAG 192 496 vee
FLAG 192 352 vln
FLAG 832 48 out
SYMBOL e 320 80 R0
WINDOW 0 61 34 Left 2
WINDOW 3 59 66 Left 2
SYMATTR InstName Ebuf
SYMATTR Value 1.0
SYMBOL res 528 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Ro
SYMATTR Value {Ro}
SYMBOL res -128 80 R0
SYMATTR InstName R1
SYMATTR Value {R}
SYMBOL cap 0 96 R0
WINDOW 3 42 56 Left 2
WINDOW 0 51 20 Left 2
SYMATTR Value {C}
SYMATTR InstName C1
SYMBOL res -400 80 R0
WINDOW 0 -53 49 Left 2
WINDOW 3 -80 76 Left 2
SYMATTR InstName Rin
SYMATTR Value 100e6
SYMBOL bi2 -272 96 R0
WINDOW 3 -195 -123 Left 2
WINDOW 0 42 17 Left 2
SYMATTR Value I=  limit(  {gm}*(v(+) - v(-)), +I1max, -I1max )
SYMATTR InstName B_G1
SYMBOL e 1296 368 R0
WINDOW 0 43 43 Left 2
WINDOW 3 50 70 Left 2
SYMATTR InstName Emid
SYMATTR Value 1.0
SYMBOL res 1104 208 R0
SYMATTR InstName RM1
SYMATTR Value 1Meg
SYMBOL res 1104 368 R0
SYMATTR InstName RM2
SYMATTR Value 1Meg
SYMBOL diode 208 16 R180
WINDOW 0 -120 51 Left 2
WINDOW 3 -93 24 Left 2
SYMATTR InstName DVLIM_P
SYMATTR Value DVLIM
SYMBOL voltage 192 -208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 49 44 Left 2
WINDOW 3 42 73 Left 2
SYMATTR InstName VL_P
SYMATTR Value {vlim_p}
SYMBOL diode 208 320 R180
WINDOW 0 -138 29 Left 2
WINDOW 3 -111 -5 Left 2
SYMATTR InstName DVLIM_N
SYMATTR Value DVLIM
SYMBOL voltage 192 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 47 49 Left 2
WINDOW 3 49 72 Left 2
SYMATTR InstName VL_N
SYMATTR Value {vlim_n}
SYMBOL diode 736 -32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName DILIM_P
SYMATTR Value DILIM
SYMBOL diode 672 128 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName DILIM_N
SYMATTR Value DILIM
TEXT 1096 -144 Left 2 ;Calculated Parameters
TEXT 600 -544 Left 2 ;Op Amp Model 3
TEXT 520 -512 Left 2 ;DC output:  v(out) = (v(+) - v(-)) * Aol
TEXT 512 -376 Left 2 ;Single Pole: fp = 1/(2*pi*R1*C1)
TEXT 512 -408 Left 2 ;Unity Gain Freq: fu = Aol*fp
TEXT 1104 -112 Left 2 !.param C=I1max / (slew * 1e6)
TEXT 1088 -264 Left 2 ;Initial Parameters
TEXT 1104 -16 Left 2 !.param gm=Aol/R
TEXT 1104 -80 Left 2 !.param fp = fu/Aol
TEXT 1096 -232 Left 2 !.param I1max=0.001 Ron=0.1
TEXT 1104 -48 Left 2 !.param R=1/(2*pi*fp*C)
TEXT 648 -480 Left 2 ;Aol = gm*R1
TEXT 512 -440 Left 2 ;Slew Max: slew = I1max / C1
TEXT 232 -208 Left 2 !.model DVLIM D( Ron={Ron} Vfwd=0V)
TEXT 376 224 Left 2 !.model DILIM D( Ron={Ron} Vfwd=0V Ilimit={Ilim}  )
TEXT 512 -328 Left 2 ;Max Voltage:  out_max = vcc - Vlim\n                            vlim = V_LP + I1max*Ron
TEXT 1104 40 Left 2 !.param vlim_p=vlim+I1max*Ron
TEXT 1104 72 Left 2 !.param vlim_n=vlim+I1max*Ron
