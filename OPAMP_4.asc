Version 4
SHEET 1 2028 888
WIRE 160 -192 160 -208
WIRE 160 -80 160 -112
WIRE 160 -48 160 -80
WIRE 1440 -16 1392 -16
WIRE 1552 -16 1504 -16
WIRE -624 48 -672 48
WIRE -512 48 -624 48
WIRE -400 48 -432 48
WIRE -208 48 -400 48
WIRE -80 48 -208 48
WIRE 160 48 160 16
WIRE 160 48 -80 48
WIRE 240 48 160 48
WIRE 368 48 288 48
WIRE 496 48 448 48
WIRE 528 48 496 48
WIRE 672 48 528 48
WIRE 800 48 720 48
WIRE 928 48 880 48
WIRE 960 48 928 48
WIRE 1040 48 960 48
WIRE 1136 48 1088 48
WIRE 1200 48 1136 48
WIRE 1344 48 1280 48
WIRE 1392 48 1392 -16
WIRE 1392 48 1344 48
WIRE 1552 48 1552 -16
WIRE 1616 48 1552 48
WIRE -624 80 -624 48
WIRE -432 96 -432 48
WIRE -208 96 -208 48
WIRE 288 96 288 48
WIRE 720 96 720 48
WIRE 1088 96 1088 48
WIRE -512 112 -512 48
WIRE -480 112 -512 112
WIRE -80 112 -80 48
WIRE 240 112 240 48
WIRE 496 112 496 48
WIRE 672 112 672 48
WIRE 928 112 928 48
WIRE 1040 112 1040 48
WIRE 1392 112 1392 48
WIRE 1440 112 1392 112
WIRE 1552 112 1552 48
WIRE 1552 112 1504 112
WIRE -480 160 -512 160
WIRE -624 224 -624 160
WIRE -624 224 -672 224
WIRE -512 224 -512 160
WIRE -512 224 -624 224
WIRE -432 224 -432 176
WIRE -208 224 -208 176
WIRE -208 224 -432 224
WIRE -80 224 -80 176
WIRE -80 224 -208 224
WIRE 16 224 -80 224
WIRE 240 224 240 160
WIRE 240 224 16 224
WIRE 288 224 288 176
WIRE 288 224 240 224
WIRE 496 224 496 176
WIRE 496 224 288 224
WIRE 672 224 672 160
WIRE 672 224 496 224
WIRE 720 224 720 176
WIRE 720 224 672 224
WIRE 928 224 928 176
WIRE 928 224 720 224
WIRE 1040 224 1040 160
WIRE 1040 224 928 224
WIRE 1088 224 1088 176
WIRE 1088 224 1040 224
WIRE 16 256 16 224
WIRE 16 256 -48 256
WIRE 160 288 160 48
WIRE -656 368 -656 336
WIRE 160 384 160 352
WIRE 160 416 160 384
WIRE -656 480 -656 448
WIRE -560 480 -656 480
WIRE -528 480 -560 480
WIRE -432 480 -480 480
WIRE -416 480 -432 480
WIRE -656 512 -656 480
WIRE -480 512 -480 480
WIRE -528 528 -528 480
WIRE 160 528 160 496
WIRE -528 608 -528 576
WIRE -480 608 -480 592
WIRE -480 608 -528 608
WIRE -656 624 -656 592
WIRE -480 624 -480 608
FLAG -656 624 vee
FLAG -656 336 vcc
FLAG 1136 48 out1
FLAG 1344 48 out2
FLAG -672 48 +
FLAG -672 224 -
FLAG -400 48 vg1
FLAG -560 480 vmid
FLAG -432 480 vmid1
FLAG -480 624 0
FLAG -48 256 vmid1
FLAG 160 -208 vcc
FLAG 160 -80 vlp
FLAG 160 528 vee
FLAG 160 384 vln
FLAG 1616 48 out
FLAG 528 48 vp2
FLAG 960 48 vp3
SYMBOL e 1088 80 R0
WINDOW 0 61 34 Left 2
WINDOW 3 59 66 Left 2
SYMATTR InstName Ebuf
SYMATTR Value 1.0
SYMBOL res 1296 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Ro
SYMATTR Value {Ro}
SYMBOL res -224 80 R0
SYMATTR InstName R1
SYMATTR Value {R}
SYMBOL cap -96 112 R0
WINDOW 3 40 44 Left 2
WINDOW 0 45 10 Left 2
SYMATTR Value {C}
SYMATTR InstName C1
SYMBOL res -640 64 R0
SYMATTR InstName Rin
SYMATTR Value 100e6
SYMBOL bi2 -432 96 R0
WINDOW 3 -50 -97 Left 2
WINDOW 0 52 24 Left 2
SYMATTR Value I=  limit(  {gm}*(v(+) - v(-)), +I1max, -I1max )
SYMATTR InstName B_G1
SYMBOL e -480 496 R0
WINDOW 0 43 43 Left 2
WINDOW 3 50 70 Left 2
SYMATTR InstName Emid
SYMATTR Value 1.0
SYMBOL res -672 352 R0
SYMATTR InstName RM1
SYMATTR Value 1Meg
SYMBOL res -672 496 R0
SYMATTR InstName RM2
SYMATTR Value 1Meg
SYMBOL diode 176 16 R180
WINDOW 0 -119 58 Left 2
WINDOW 3 -90 20 Left 2
SYMATTR InstName DVLIM_P
SYMATTR Value DVLIM
SYMBOL voltage 160 -208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 49 44 Left 2
WINDOW 3 42 73 Left 2
SYMATTR InstName VL_P
SYMATTR Value {vlim_p}
SYMBOL diode 176 352 R180
WINDOW 0 -122 43 Left 2
WINDOW 3 -88 10 Left 2
SYMATTR InstName DVLIM_N
SYMATTR Value DVLIM
SYMBOL voltage 160 400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 47 49 Left 2
WINDOW 3 49 72 Left 2
SYMATTR InstName VL_N
SYMATTR Value {vlim_n}
SYMBOL diode 1504 -32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName DILIM_P
SYMATTR Value DILIM
SYMBOL diode 1440 128 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName DILIM_N
SYMATTR Value DILIM
SYMBOL e 288 80 R0
WINDOW 0 42 44 Left 2
WINDOW 3 51 76 Left 2
SYMATTR InstName Ep2
SYMATTR Value 1.0
SYMBOL res 464 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rp2
SYMATTR Value 1k
SYMBOL cap 480 112 R0
WINDOW 3 27 54 Left 2
SYMATTR Value {Cp23}
SYMATTR InstName Cp2
SYMBOL e 720 80 R0
WINDOW 0 42 44 Left 2
WINDOW 3 51 76 Left 2
SYMATTR InstName Ep3
SYMATTR Value 1.0
SYMBOL res 896 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rp3
SYMATTR Value 1k
SYMBOL cap 912 112 R0
WINDOW 3 28 59 Left 2
SYMATTR Value {Cp23}
SYMATTR InstName Cp3
TEXT 632 504 Left 2 ;Calculated Parameters
TEXT 168 -520 Left 2 ;Op Amp Model 4
TEXT -592 -520 Left 2 ;DC output:  v(out) = (v(+) - v(-)) * Aol
TEXT -600 -384 Left 2 ;Single Pole: fp = 1/(2*pi*R1*C1)
TEXT -600 -416 Left 2 ;Unity Gain Freq: fu = Aol*fp
TEXT 640 536 Left 2 !.param C=I1max / (slew * 1e6)
TEXT 632 328 Left 2 ;Initial Parameters
TEXT 640 632 Left 2 !.param gm=Aol/R
TEXT 640 568 Left 2 !.param fp = fu/Aol
TEXT 640 360 Left 2 !.param I1max=0.001
TEXT 640 600 Left 2 !.param R=1/(2*pi*fp*C)
TEXT -464 -488 Left 2 ;Aol = gm*R1
TEXT -600 -448 Left 2 ;Slew Max: slew = I1max / C1
TEXT 648 720 Left 2 !.param vlim_p=vlim+I1max*1.0
TEXT 648 752 Left 2 !.param vlim_n=vlim+I1max*1.0
TEXT 312 -256 Left 2 !.model DVLIM D( Ron=1 Vfwd=0V)
TEXT -600 -336 Left 2 ;Max Voltage:  out_max = vcc - Vlim\n                            vlim = V_LP + I1max*Ron
TEXT 1136 -104 Left 2 !.model DILIM D( Ron=0.1 Vfwd=0V Ilimit={Ilim}  )
TEXT 648 808 Left 2 !.param Cp23=1/(2*pi*fp23*1k)
